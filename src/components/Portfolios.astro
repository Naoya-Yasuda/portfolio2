---
interface Portfolio {
  image: string;
  isPdf?: boolean;
  title: string;
  text: string;
  lang?: string;
  library?: string;
  skill?: string;
  cloud?: string;
  aiModel?: string;
  specialNote?: string;
  links?: { label: string; url: string; isGithub?: boolean }[];
  note?: string;
}

const portfolios: Portfolio[] = [
  {
    image: "/portfolio2/img/portfolios/EV.jpg",
    title: "自動車業界向け<br>AWS環境移行",
    text: "カスタムAWS環境で車両データを管理・活用する基盤への移行要件、移行計画策定、移行実施",
    cloud: "AWS(CloudFormations)"
  },
  {
    image: "/portfolio2/img/portfolios/MDXQ2023.png",
    title: "官公庁系<br>IT全般の支援・調査",
    text: "クラウド調達、 スクレイピング、 データ基盤構築、勉強会、CMSによるHPの更新",
    lang: "Python",
    cloud: "AWS"
  },
  {
    image: "/portfolio2/img/portfolios/EV.jpg",
    title: "自動車業界向け<br>グラフ機能python3.12セキュリティ対応",
    text: "グラフ作成APIの対応案調査・評価、製造、テスト",
    lang: "Python",
    library: "matplotlib, selenium, PhantomJS",
    cloud: "AWS(Lambda, S3, ECR, AWS SAM)"
  },
  {
    image: "/portfolio2/img/portfolios/MDXQ2023_slide.pdf",
    isPdf: true,
    title: "東北のグループ企業のDX推進（マナビDXQ2023から有償化）",
    text: "データ基盤構築・GA4導入支援・ダッシュボード作成",
    cloud: "AWS, Google Analytics",
    links: [{ label: "Website", url: "https://dxq.manabi-dx.ipa.go.jp/" }]
  },
  {
    image: "/portfolio2/img/portfolios/EV.jpg",
    title: "自動車業界向け<br>営業支援アプリ開発",
    text: "DynamoDBのテーブル設計、ヒアリング資料に関するAPIの設計書作成、製造、UT・IT",
    lang: "Python",
    cloud: "AWS(Lambda, DynamoDB, Cognito, API Gateway, SQS, S3)"
  },
  {
    image: "/portfolio2/img/portfolios/MDXQ2023_slide.pdf",
    isPdf: true,
    title: "マナビDX Quest 2023<br>スマホアプリデータ分析",
    text: "東北のグループ企業との協働。ヒアリングからの現状分析、EDA、打ち手設定、PoCを実施。提案資料を作成し現在は有償契約",
    lang: "Python, Jupyter Notebook",
    aiModel: "LightGBM, LSTM, K-Means",
    links: [
      { label: "Website", url: "https://r-club.jp/index.php/" },
      { label: "GitHub", url: "https://github.com/Naoya-Yasuda/MANABI_DX_QUEST_2023_PrePoC", isGithub: true }
    ],
    note: "※機密保護の観点から資料はマスク済。Git上にはデータ、notebookの出力を管理しないように設定済。"
  },
  {
    image: "/portfolio2/img/portfolios/MDXQ2023.png",
    title: "マナビDX Quest 2023<br>PBL05データ分析",
    text: "データ分析30位 Gold修了。EDA、PoC、実行計画策定まで実施。",
    lang: "Python, Jupyter Notebook",
    aiModel: "LightGBM",
    links: [{ label: "Website", url: "https://dxq.manabi-dx.ipa.go.jp/" }]
  },
  {
    image: "/portfolio2/img/portfolios/modoken.jpg",
    title: "Open Hack U 2023 ONLINE<br>盲導犬スマホアプリ",
    text: "サイバー大学の3名で参加<br>リーダーとして主に開発・事務局への解説を担当<br>最優秀賞と参加者投票による賞をW受賞",
    lang: "Flutter Dart",
    aiModel: "YOLO_v2",
    links: [
      { label: "Website", url: "https://hacku.yahoo.co.jp/hacku2023_online/index.html" },
      { label: "Youtube", url: "https://www.youtube.com/live/PAsUW8Uk5JM?si=aWKECx11UTioCvgk&t=3196" },
      { label: "GitHub", url: "https://github.com/Naoya-Yasuda/HackU2023_project", isGithub: true }
    ]
  },
  {
    image: "/portfolio2/img/portfolios/portfolio_panel.png",
    title: "ポートフォリオサイト",
    text: "当サイト、Astroを用いて作成。<br>レスポンシブデザイン対応。",
    lang: "HTML, CSS, JS(Astro)",
    skill: "Deployment : GitHub Pages",
    links: [{ label: "GitHub", url: "https://github.com/Naoya-Yasuda/portfolio2", isGithub: true }]
  },
  {
    image: "/portfolio2/img/portfolios/sodan.jpg",
    title: "相談システム",
    text: "開発リーダーとして顧客折衝、AIによるリスクキーワード抽出、LINE周りのバックエンド開発、BtoB向けメイン画面、メール相談機能を開発",
    lang: "Python, HTML, CSS, JS(Vue.js) PHP",
    skill: "AI : Mecab, TF-IDF",
    cloud: "AWS(EC2, S3)",
    links: [{ label: "Website", url: "https://yorisoi-chat.jp/" }]
  },
  {
    image: "/portfolio2/img/portfolios/IY.jpg",
    title: "大手小売業向け<br>勤怠管理・作業割当システム",
    text: "accenture案件 ph1ではフロントエンドテックリードとして全画面のデザイン統一や認証認可を担当。ph2ではメイン機能である作業割当のバックエンドを担当。",
    lang: "HTML, SCSS, TS(Angular) Java(Spring Boot, Spring Batch)"
  },
  {
    image: "/portfolio2/img/portfolios/mingin.jpeg",
    title: "ネット銀行<br>スマホアプリ開発",
    text: "accenture案件 マイクロサービス・デビットカードチームにてバッチ開発を担当。その後パフォーマンステストチームにて数百万ユーザ想定のデータ作成、テストを実施。",
    lang: "Java(Spring Batch)",
    cloud: "GCP(DataFlow, Spanner), Azure, Datadog",
    specialNote: "大規模アジャイル、マイクロサービス、gRPC、マルチスレッド"
  },
  {
    image: "/portfolio2/img/portfolios/accenture.jpg",
    title: "accenture<br>社内トレーニング(ACTS)",
    text: "accentureとの契約第一号となるべく他社との混合チームで参加。保険会社のシステム刷新のPBLについて独自定義されたACTSという手法でスクラム開発し評価される。2位通過で無事案件獲得に繋がった。",
    lang: "TS(Angular), Java(Spring Boot)",
    cloud: "GCP",
    links: [{ label: "Website", url: "https://www.accenture.com/jp-ja/services/software-engineering/accenture-connected-technology-solution" }]
  },
  {
    image: "/portfolio2/img/portfolios/jtb.jpg",
    title: "大手旅行会社<br>公式サイト刷新",
    text: "保守フェーズにて主に画面側を担当。刷新フェーズの結合テストも担当。",
    lang: "HTML, CSS, JS, Java(Spring)"
  },
  {
    image: "/portfolio2/img/portfolios/agile.jpg",
    title: "NSSOLアジャイル人材育成案件",
    text: "技研の余った予算でパートナー企業の人材を育てて一緒に働く人材にしようという実験的試み。社内ツールを作成しかなり技術的に成長した。",
    lang: "HTML, SCSS, JS(Vue.js), Java(Spring Boot)",
    links: [{ label: "Website", url: "https://www.nssol.nipponsteel.com/ss/bxdc/" }]
  },
  {
    image: "/portfolio2/img/portfolios/test.png",
    title: "金融機関向け<br>窓口端末テスト案件",
    text: "優秀なテストチーム内で半年間テストのイロハを教わる。結合テスト仕様書作成・実施、テスト観点作成、シナリオテスト実施",
    skill: "Tools : Excel"
  },
  {
    image: "/portfolio2/img/portfolios/monitor.jpg",
    title: "外資系放送局<br>保守運用",
    text: "サーバーと放送の監視・障害対応。協力会社のリーダーとしてメンバー教育、シフト管理を実施。"
  }
];
---

<section id="portfolios" class="portfolios-wrapper">
  <h2>Portfolios</h2>

  <ul class="portfolios">
    {portfolios.map((p, index) => (
      <li class="panel" style={`animation-delay: ${index * 0.1}s`}>
        {p.isPdf ? (
          <object class="panel-img" data={p.image} type="application/pdf"></object>
        ) : (
          <img class="panel-img" src={p.image} alt={p.title.replace(/<br>/g, ' ')}>
        )}
        <div class="panel-content">
          <p class="panel-title" set:html={p.title}></p>
          <p class="panel-text" set:html={p.text}></p>
          {p.lang && <p class="panel-lang">Languages : {p.lang}</p>}
          {p.library && <p class="panel-lang">Library : {p.library}</p>}
          {p.skill && <p class="panel-skill">{p.skill}</p>}
          {p.aiModel && <p class="panel-skill">AI model : {p.aiModel}</p>}
          {p.cloud && <p class="panel-skill">Cloud : {p.cloud}</p>}
          {p.specialNote && <p class="panel-lang">Special Note : {p.specialNote}</p>}
          <br>
          <div class="panel-buttons">
            {p.links?.map((link) => (
              <a href={link.url} class={`panel-link ${link.isGithub ? 'github-link' : ''}`}>{link.label}</a>
            ))}
            {p.note && <p class="panel-text-mini">{p.note}</p>}
          </div>
        </div>
      </li>
    ))}
  </ul>
</section>

<script>
  // Intersection Observer でスクロール時にアニメーション発火
  const observer = new IntersectionObserver((entries) => {
    entries.forEach(entry => {
      if (entry.isIntersecting) {
        entry.target.classList.add('animate-in');
      }
    });
  }, { threshold: 0.1 });

  document.querySelectorAll('.panel').forEach(panel => {
    observer.observe(panel);
  });
</script>

<style>
  .portfolios-wrapper {
    text-align: center;
  }

  .portfolios {
    display: flex;
    flex-wrap: wrap;
    flex-direction: row;
    justify-content: center;
    list-style-type: none;
    padding: 0 5%;
    text-align: center;
  }

  .panel-lang,
  .panel-skill {
    font-weight: 500;
  }

  .panel {
    display: inline-block;
    margin: 30px 45px;
    width: 350px;
    background: #fff;
    border-radius: 5px;
    box-shadow: 0 2px 5px #ccc;
    /* アニメーション初期状態 */
    opacity: 0;
    transform: translateY(50px);
    transition: opacity 0.6s ease-out, transform 0.6s ease-out, box-shadow 0.3s ease;
  }

  .panel.animate-in {
    opacity: 1;
    transform: translateY(0);
  }

  .panel:hover {
    box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15);
    transform: translateY(-5px);
  }

  .panel.animate-in:hover {
    transform: translateY(-5px);
  }

  .panel-img {
    border-radius: 5px 5px 0 0;
    width: 100%;
    height: 240px;
    border-bottom: solid 1px #ccc;
    object-fit: cover;
  }

  .panel-content {
    display: flex;
    flex-direction: column;
    height: calc(100% - 284px);
    padding: 20px;
  }

  .panel-title {
    font-size: 20px;
    font-weight: 100;
    margin-bottom: 20px;
    text-align: center;
    color: #333;
  }

  .panel-text {
    color: #777;
    font-size: 14px;
    line-height: 1.5;
  }

  .panel-text-mini {
    font-size: 10px;
    margin-bottom: 0;
    margin-top: 12px;
  }

  .panel-link {
    border: 1px solid #00aaff;
    text-decoration: none;
    color: #00aaff;
    margin: 0 10px;
    padding: 5px 10px;
    border-radius: 5px;
  }

  .panel-link:hover {
    font-weight: 700;
  }

  .github-link {
    border-color: #171515;
    color: #171515;
  }

  .panel-buttons {
    margin-top: auto;
  }

  @media (max-width: 767px) {
    .panel {
      margin: 30px 0;
      width: 320px;
    }
  }
</style>
